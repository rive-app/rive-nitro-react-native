#
# rive+autolinking.cmake
# This file was generated by nitrogen. DO NOT MODIFY THIS FILE.
# https://github.com/mrousavy/nitro
# Copyright Â© Marc Rousavy @ Margelo
#

# This is a CMake file that adds all files generated by Nitrogen
# to the current CMake project.
#
# To use it, add this to your CMakeLists.txt:
# ```cmake
# include(${CMAKE_SOURCE_DIR}/../nitrogen/generated/android/rive+autolinking.cmake)
# ```

# Define a flag to check if we are building properly
add_definitions(-DBUILDING_RIVE_WITH_GENERATED_CMAKE_PROJECT)

# Enable Raw Props parsing in react-native (for Nitro Views)
add_definitions(-DRN_SERIALIZABLE_STATE)

# Add all headers that were generated by Nitrogen
include_directories(
  "../nitrogen/generated/shared/c++"
  "../nitrogen/generated/android/c++"
  "../nitrogen/generated/android/"
)

# Add all .cpp sources that were generated by Nitrogen
target_sources(
  # CMake project name (Android C++ library name)
  rive PRIVATE
  # Autolinking Setup
  ../nitrogen/generated/android/riveOnLoad.cpp
  # Shared Nitrogen C++ sources
  ../nitrogen/generated/shared/c++/HybridBindableArtboardSpec.cpp
  ../nitrogen/generated/shared/c++/HybridRiveSpec.cpp
  ../nitrogen/generated/shared/c++/HybridRiveFileSpec.cpp
  ../nitrogen/generated/shared/c++/HybridRiveFileFactorySpec.cpp
  ../nitrogen/generated/shared/c++/HybridRiveImageSpec.cpp
  ../nitrogen/generated/shared/c++/HybridRiveImageFactorySpec.cpp
  ../nitrogen/generated/shared/c++/HybridRiveViewSpec.cpp
  ../nitrogen/generated/shared/c++/views/HybridRiveViewComponent.cpp
  ../nitrogen/generated/shared/c++/HybridRiveWorkletBridgeSpec.cpp
  ../nitrogen/generated/shared/c++/HybridViewModelSpec.cpp
  ../nitrogen/generated/shared/c++/HybridViewModelInstanceSpec.cpp
  ../nitrogen/generated/shared/c++/HybridViewModelPropertySpec.cpp
  ../nitrogen/generated/shared/c++/HybridViewModelNumberPropertySpec.cpp
  ../nitrogen/generated/shared/c++/HybridViewModelStringPropertySpec.cpp
  ../nitrogen/generated/shared/c++/HybridViewModelBooleanPropertySpec.cpp
  ../nitrogen/generated/shared/c++/HybridViewModelColorPropertySpec.cpp
  ../nitrogen/generated/shared/c++/HybridViewModelEnumPropertySpec.cpp
  ../nitrogen/generated/shared/c++/HybridViewModelTriggerPropertySpec.cpp
  ../nitrogen/generated/shared/c++/HybridViewModelImagePropertySpec.cpp
  ../nitrogen/generated/shared/c++/HybridViewModelListPropertySpec.cpp
  ../nitrogen/generated/shared/c++/HybridViewModelArtboardPropertySpec.cpp
  # Android-specific Nitrogen C++ sources
  ../nitrogen/generated/android/c++/JHybridBindableArtboardSpec.cpp
  ../nitrogen/generated/android/c++/JHybridRiveSpec.cpp
  ../nitrogen/generated/android/c++/JHybridRiveFileSpec.cpp
  ../nitrogen/generated/android/c++/JHybridRiveFileFactorySpec.cpp
  ../nitrogen/generated/android/c++/JHybridRiveImageSpec.cpp
  ../nitrogen/generated/android/c++/JHybridRiveImageFactorySpec.cpp
  ../nitrogen/generated/android/c++/JHybridRiveViewSpec.cpp
  ../nitrogen/generated/android/c++/JVariant_HybridViewModelInstanceSpec_DataBindMode_DataBindByName.cpp
  ../nitrogen/generated/android/c++/JEventPropertiesOutput.cpp
  ../nitrogen/generated/android/c++/views/JHybridRiveViewStateUpdater.cpp
  ../nitrogen/generated/android/c++/JHybridViewModelSpec.cpp
  ../nitrogen/generated/android/c++/JHybridViewModelInstanceSpec.cpp
  ../nitrogen/generated/android/c++/JHybridViewModelPropertySpec.cpp
  ../nitrogen/generated/android/c++/JHybridViewModelNumberPropertySpec.cpp
  ../nitrogen/generated/android/c++/JHybridViewModelStringPropertySpec.cpp
  ../nitrogen/generated/android/c++/JHybridViewModelBooleanPropertySpec.cpp
  ../nitrogen/generated/android/c++/JHybridViewModelColorPropertySpec.cpp
  ../nitrogen/generated/android/c++/JHybridViewModelEnumPropertySpec.cpp
  ../nitrogen/generated/android/c++/JHybridViewModelTriggerPropertySpec.cpp
  ../nitrogen/generated/android/c++/JHybridViewModelImagePropertySpec.cpp
  ../nitrogen/generated/android/c++/JHybridViewModelListPropertySpec.cpp
  ../nitrogen/generated/android/c++/JHybridViewModelArtboardPropertySpec.cpp
)

# From node_modules/react-native/ReactAndroid/cmake-utils/folly-flags.cmake
# Used in node_modules/react-native/ReactAndroid/cmake-utils/ReactNative-application.cmake
target_compile_definitions(
  rive PRIVATE
  -DFOLLY_NO_CONFIG=1
  -DFOLLY_HAVE_CLOCK_GETTIME=1
  -DFOLLY_USE_LIBCPP=1
  -DFOLLY_CFG_NO_COROUTINES=1
  -DFOLLY_MOBILE=1
  -DFOLLY_HAVE_RECVMMSG=1
  -DFOLLY_HAVE_PTHREAD=1
  # Once we target android-23 above, we can comment
  # the following line. NDK uses GNU style stderror_r() after API 23.
  -DFOLLY_HAVE_XSI_STRERROR_R=1
)

# Add all libraries required by the generated specs
find_package(fbjni REQUIRED) # <-- Used for communication between Java <-> C++
find_package(ReactAndroid REQUIRED) # <-- Used to set up React Native bindings (e.g. CallInvoker/TurboModule)
find_package(react-native-nitro-modules REQUIRED) # <-- Used to create all HybridObjects and use the Nitro core library

# Link all libraries together
target_link_libraries(
        rive
        fbjni::fbjni                              # <-- Facebook C++ JNI helpers
        ReactAndroid::jsi                         # <-- RN: JSI
        react-native-nitro-modules::NitroModules  # <-- NitroModules Core :)
)

# Link react-native (different prefab between RN 0.75 and RN 0.76)
if(ReactAndroid_VERSION_MINOR GREATER_EQUAL 76)
    target_link_libraries(
        rive
        ReactAndroid::reactnative                 # <-- RN: Native Modules umbrella prefab
    )
else()
    target_link_libraries(
        rive
        ReactAndroid::react_nativemodule_core     # <-- RN: TurboModules Core
    )
endif()
